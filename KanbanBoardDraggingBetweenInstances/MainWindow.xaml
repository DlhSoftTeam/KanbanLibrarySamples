<Window x:Class="KanbanBoardDraggingBetweenInstances.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:KanbanBoardDraggingBetweenInstances"
        xmlns:kl="clr-namespace:KanbanLibrary;assembly=KanbanLibrary"
        mc:Ignorable="d"
        Title="KanbanBoard - dragging between instances" Width="1350" Height="746">
    <Window.Resources>
        <DataTemplate x:Key="SourceItemTemplate" DataType="{x:Type kl:KanbanItem}">
            <Border BorderBrush="Silver" BorderThickness="1" Background="White" CornerRadius="4"
                    Padding="8">
                <Grid>
                    <ContentPresenter Content="{Binding Content}"/>
                    <Thumb Name="Thumb" Margin="-8" Cursor="Hand"
                           DragStarted="Thumb_DragStarted"
                           DragDelta="Thumb_DragDelta"
                           DragCompleted="Thumb_DragCompleted"
                           Visibility="Collapsed">
                        <Thumb.Template>
                            <ControlTemplate TargetType="Thumb">
                                <Rectangle Fill="Transparent"/>
                            </ControlTemplate>
                        </Thumb.Template>
                    </Thumb>
                    <Grid Name="PART_KanbanHandle" Background="Transparent" Cursor="Hand"
                          Visibility="Visible"/>
                </Grid>
            </Border>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding State.Content}" Value="Pickorders">
                    <Setter TargetName="PART_KanbanHandle" Property="Visibility" Value="Collapsed"/>
                    <Setter TargetName="Thumb" Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </Window.Resources>
    <Canvas>
        <DockPanel Name="Root">
            <kl:KanbanBoard DockPanel.Dock="Left" Name="SourceKanbanBoard" Width="350"
                        ItemTemplate="{StaticResource SourceItemTemplate}"/>
            <kl:KanbanBoard Name="TargetKanbanBoard"/>
        </DockPanel>
        <ContentControl Name="DraggingItemControl" 
                        Content="{Binding}"
                        ContentTemplate="{StaticResource SourceItemTemplate}"
                        Opacity="0.5"
                        FontSize="16"
                        Visibility="Collapsed"/>
    </Canvas>
</Window>
